(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{37:function(e,t,n){},39:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(29),r=n.n(s),i=(n(37),n(10)),o=n.n(i),u=n(32),j=n(13),l=n(7),d=(n(39),n(64)),b=n(65),m=n(31),f=n(9),h=n(2),O=n(66),p=n(68),x=n(0);var v=function(e){var t=Object(a.useState)({}),n=Object(l.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)({}),i=Object(l.a)(r,2),o=i[0],u=i[1],j=Object(a.useRef)(null),d=function(e,t){s(Object(h.a)(Object(h.a)({},c),{},Object(f.a)({},e,t))),o[e]&&u(Object(h.a)(Object(h.a)({},o),{},Object(f.a)({},e,null)))};return Object(a.useEffect)((function(){window.addEventListener("keyup",(function(e){13===e.keyCode&&e.ctrlKey&&document.getElementById("submitButton").click()}))})),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(O.a,{noValidate:!0,ref:j,children:[Object(x.jsxs)(O.a.Group,{className:"mb-3",children:[Object(x.jsx)(O.a.Label,{children:"Name"}),Object(x.jsx)(O.a.Control,{required:!0,type:"text",name:"name",onChange:function(e){return d("name",e.target.value)},isInvalid:!!o.name,placeholder:"Enter your name"}),Object(x.jsx)(O.a.Control.Feedback,{type:"invalid",children:o.name})]}),Object(x.jsxs)(O.a.Group,{className:"mb-3",children:[Object(x.jsx)(O.a.Label,{children:"Message"}),Object(x.jsx)(O.a.Control,{required:!0,as:"textarea",rows:3,name:"message",onChange:function(e){return d("message",e.target.value)},isInvalid:!!o.message,placeholder:"Please leave your message here"}),Object(x.jsx)(O.a.Control.Feedback,{type:"invalid",children:o.message})]}),Object(x.jsx)(p.a,{onClick:function(t){t.preventDefault();var n=function(){var e=c.name,t=c.message,n={};return e&&""!==e?/^[a-zA-Z0-9_]+$/gi.test(e)||(n.name="The field cannot contain only latin letters, numbers and underscore symbol"):n.name="The field cannot be blank",t&&""!==t?t.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)&&(n.message="The field cannot not contain hypelinks"):n.message="The field cannot be blank",n}();Object.keys(n).length>0?u(n):e.postData({name:c.name,message:c.message})},className:"mb-2",id:"submitButton",children:"Send"})]})})},g=n(67),y=n(17);var k=function(e){return Object(x.jsx)(x.Fragment,{children:e.items.map((function(e){return Object(x.jsxs)(g.a,{className:"mb-2",children:[Object(x.jsx)(y.a,{className:"card-header",children:e.name}),Object(x.jsx)(g.a.Body,{children:e.message})]},e._id)}))})};n(43);var w=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)([]),r=Object(l.a)(s,2),i=r[0],f=r[1],h=Object(a.useState)(null),O=Object(l.a)(h,2),p=O[0],g=O[1],y="/api/messages",w=function(){var e=Object(j.a)(o.a.mark((function e(){var t,n,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:{},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},fetch(y,n).then(function(){var e=Object(j.a)(o.a.mark((function e(t){var n,a,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=a,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(c=e.t0,t.ok){e.next=10;break}return s=c&&c.message||t.status,e.abrupt("return",Promise.reject(s));case 10:201===t.status&&g(t.status),i.unshift(c),f((function(e){return[].concat(Object(u.a)(e),[i])}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(o.a.mark((function e(){var t=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.length>0&&void 0!==t[0]?t[0]:{},fetch(y).then(function(){var e=Object(j.a)(o.a.mark((function e(t){var n,a,s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=a,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=10;break}return r=s&&s.message||t.status,e.abrupt("return",Promise.reject(r));case 10:f(s),c(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[y]),Object(x.jsxs)(d.a,{fluid:!0,children:[Object(x.jsx)(b.a,{className:"justify-content-md-center mt-5 mb-5",children:Object(x.jsx)("h1",{children:"Messenger"})}),Object(x.jsx)(b.a,{className:"justify-content-md-center",children:Object(x.jsx)(m.a,{children:Object(x.jsx)(v,{postData:w,status:p})})}),Object(x.jsx)(b.a,{className:"justify-content-md-center mt-5",children:Object(x.jsxs)(m.a,{children:[!n&&Object(x.jsx)("div",{children:"Loading messages..."}),Object(x.jsx)(k,{items:i})]})})]})};n(62);r.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(w,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.13c3f48c.chunk.js.map